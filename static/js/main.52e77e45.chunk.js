(this["webpackJsonpil-loss-charts"]=this["webpackJsonpil-loss-charts"]||[]).push([[0],{307:function(e,t,n){},308:function(e,t,n){},363:function(e,t,n){},547:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(1),c=n.n(r),s=n(24),i=n.n(s),o=(n(307),n(308),n(309),n(310),n(553)),l=n(555),u=n(263),d=n(29),j=n.n(d),b=n(54),p=n(33),f=n(554),h=n(557),m=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});var O=function(e){var t=e.title,n=e.value,r=m.format(parseInt(n,10));return Object(a.jsxs)(h.a.Body,{children:[Object(a.jsx)(h.a.Title,{children:t}),Object(a.jsx)(h.a.Text,{children:r})]})},v=n(130),x=n(86),y=n(131);function D(e){return"".concat(e.token0.symbol,"/").concat(e.token1.symbol)}var g=function(e){var t=e.pairs,n=e.currentPairId,r=e.setPair,c=null,s=t.reduce((function(e,t){return t.id===n&&(c=D(t)),Object(x.a)(Object(x.a)({},e),{},Object(v.a)({},D(t),t.id))}));return window.pairEntries=s,Object(a.jsxs)(h.a.Body,{children:[Object(a.jsx)(h.a.Title,{children:"Market"}),Object(a.jsx)(h.a.Text,{children:Object(a.jsx)(y.Combobox,{data:t.map(D),defaultValue:c,filter:"contains",caseSensitive:!1,onChange:function(e){return s[e]&&r(s[e])}})})]})},w=n(556),S=n(23),k=n.n(S),N=n(181),L=n.n(N),T=(n(363),Object.assign(N.defaultFormats,{default:"YYYY-MM-DD"}));L()({formats:T});var E=function(e){var t=e.lpDate,n=e.setLPDate,c=e.pairData,s=e.lpShare,i=e.setLPShare,o=e.dailyDataAtLPDate,l=c.token0,u=c.token1,d=function(e,t){if("USD"===e){var n=new k.a(t).div(o.reserveUSD);m(t),D(n.times(o.reserve0).toNumber()),L(n.times(o.reserve1).toNumber()),i(t)}else if("token0"===e){var a=new k.a(t).div(o.reserve0),r=a.times(o.reserveUSD).toNumber();m(r),D(t),L(a.times(o.reserve1).toNumber()),i(r)}else{if("token1"!==e)throw new Error("Tried to update share with invalid denom: ".concat(e));var c=new k.a(t).div(o.reserve1),s=c.times(o.reserveUSD).toNumber();m(s),D(c.times(o.reserve1).toNumber()),L(t),i(s)}},j=Object(r.useState)(s),b=Object(p.a)(j,2),f=b[0],m=b[1],O=Object(r.useState)(0),v=Object(p.a)(O,2),x=v[0],D=v[1],g=Object(r.useState)(0),S=Object(p.a)(g,2),N=S[0],L=S[1];return Object(r.useEffect)((function(){!function(e,t){var n=new k.a(e).div(t.reserveUSD),a=n.times(t.reserve0).toNumber(),r=n.times(t.reserve1).toNumber();m(e),D(a),L(r)}(s,o)}),[s,o]),Object(a.jsxs)(h.a.Body,{className:"lp-input-form",children:[Object(a.jsxs)(w.a.Group,{children:[Object(a.jsx)(w.a.Label,{children:"LP Date"}),Object(a.jsx)("div",{children:Object(a.jsx)(y.DateTimePicker,{className:"lp-date-picker form-control",min:new Date("2020-05-18"),max:new Date,format:"yyyy-MM-dd",value:t,onChange:n,time:!1})})]}),Object(a.jsxs)(w.a.Group,{children:[Object(a.jsx)(w.a.Label,{children:"USD Liquidity"}),Object(a.jsx)(w.a.Control,{type:"text",onChange:function(e){return d("USD",e.target.value)},value:f})]}),Object(a.jsxs)(w.a.Group,{children:[Object(a.jsx)(w.a.Label,{children:"".concat(l.symbol," Liquidity")}),Object(a.jsx)(w.a.Control,{type:"text",onChange:function(e){return d("token0",e.target.value)},value:x})]}),Object(a.jsxs)(w.a.Group,{children:[Object(a.jsx)(w.a.Label,{children:"".concat(u.symbol," Liquidity")}),Object(a.jsx)(w.a.Control,{type:"text",onChange:function(e){return d("token1",e.target.value)},value:N})]})]})},U=n(552),P=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});var C=function(e){var t=e.lpStats;if(!t.totalFees)return null;var n=function(e){var t=parseInt(e,10);if(Number.isNaN(t))throw new Error("Could not parse value for LP stats widget: ".concat(e));return P.format(t)};return Object(a.jsx)(h.a.Body,{className:"lp-stats-widget",children:Object(a.jsx)(U.a,{borderless:!0,className:"lp-stats-table",children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"lp-stats-table-cell label",children:"Fees Collected"}),Object(a.jsx)("td",{className:"lp-stats-table-cell value",children:n(t.totalFees)})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"lp-stats-table-cell label",children:"Impermanent Loss"}),Object(a.jsx)("td",{className:"lp-stats-table-cell value",children:n(t.impermanentLoss)})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"lp-stats-table-cell label",children:Object(a.jsx)("strong",{children:"Total Return"})}),Object(a.jsx)("td",{className:"lp-stats-table-cell value",children:Object(a.jsx)("strong",{children:n(t.totalReturn)})})]})]})})})},I=n(64),F=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function M(e){var t=e.active,n=e.payload;e.label;if(!t||!n)return null;var r={totalFees:n[0].payload.runningFee,totalReturn:n[0].payload.runningReturn,impermanentLoss:n[0].payload.runningImpermanentLoss};return Object(a.jsx)(C,{lpStats:r})}var q=function(e){var t=e.lpStats,n=[];for(var r in t.days){var c=t.runningFees[r].toNumber(),s=t.runningReturn[r].toNumber();n.push({day:t.days[r],runningFee:c,runningReturn:s,runningImpermanentLoss:t.runningImpermanentLoss[r].toNumber(),returns:[c,s]})}return window.chartData=n,Object(a.jsx)(I.d,{width:"100%",height:563,children:Object(a.jsxs)(I.b,{data:n,margin:{top:10,right:10,bottom:10},width:800,height:563,children:[Object(a.jsx)("defs",{children:Object(a.jsxs)("linearGradient",{id:"areaColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(a.jsx)("stop",{offset:"5%",stopColor:"#0089ff",stopOpacity:.8}),Object(a.jsx)("stop",{offset:"95%",stopColor:"#0089ff",stopOpacity:0})]})}),Object(a.jsx)(I.f,{dataKey:"day",interval:30,tickLine:!1,tickMargin:10}),Object(a.jsx)(I.g,{tickFormatter:function(e){return F.format(e)},width:100}),Object(a.jsx)(I.a,{type:"monotone",dataKey:"returns",stroke:"#0089ff",fill:"url(#areaColor)"}),Object(a.jsx)(I.c,{type:"monotone",dataKey:"runningReturn",stroke:"#5cc9f5",strokeWidth:3,dot:!1}),Object(a.jsx)(I.e,{content:Object(a.jsx)(M,{})})]})})},R=n(55),A=n(184),H=n(144),V=n(273),B=n(274),_=n(90);function G(){var e=Object(H.a)(['\n                    {\n                        pairDayDatas(orderBy: date, orderDirection: asc,\n                            where: {\n                                pairAddress: "','",\n                                date_gt: ',"\n                                date_lt: ","\n                            }\n                        ) {\n                            date\n                            pairAddress\n                            dailyVolumeToken0\n                            dailyVolumeToken1\n                            dailyVolumeUSD\n                            reserveUSD\n                            reserve0\n                            reserve1\n                        }\n                }\n                "]);return G=function(){return e},e}function Y(){var e=Object(H.a)(["\n                    {\n                        pairs(first: ",", orderBy: volumeUSD, orderDirection: desc) {\n                            id\n                            token0 {\n                                id\n                                name\n                                symbol\n                            }\n                            token1 {\n                                id\n                                name\n                                symbol\n                            }\n\n                        }\n                    }\n                "]);return Y=function(){return e},e}function J(){var e=Object(H.a)(['\n                    {\n                        pair(id: "','"){\n                            token0 {\n                                id\n                                name\n                                symbol\n                                decimals\n                                derivedETH\n                                tradeVolumeUSD\n                                totalLiquidity\n                            }\n                            token1 {\n                                id\n                                symbol\n                                name\n                                decimals\n                                derivedETH\n                                tradeVolumeUSD\n                                totalLiquidity\n                            }\n                            reserve0\n                            reserve1\n                            reserveUSD\n                            trackedReserveETH\n                            token0Price\n                            token1Price\n                            volumeUSD\n                            txCount\n                            createdAtTimestamp\n                        }\n                    }\n                ']);return J=function(){return e},e}var K=function(){function e(){Object(V.a)(this,e)}return Object(B.a)(e,null,[{key:"getPairOverview",value:function(){var t=Object(b.a)(j.a.mark((function t(n){var a,r,c,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.client.query({query:Object(_.gql)(J(),n)});case 2:if(a=t.sent,r=null===a||void 0===a?void 0:a.data,null!=(c=r.pair)){t.next=6;break}throw new Error("Could not fetch pair with ID ".concat(n,". Error from response: ").concat(a.error));case 6:return s=new k.a(c.volumeUSD,10).times(e.FEE_RATIO).toString(),t.abrupt("return",Object(x.a)(Object(x.a)({},c),{},{feesUSD:s}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getTopPairs",value:function(){var t=Object(b.a)(j.a.mark((function t(){var n,a,r,c,s=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:1e3,t.next=3,e.client.query({query:Object(_.gql)(Y(),n)});case 3:if(a=t.sent,r=null===a||void 0===a?void 0:a.data,null!=(c=r.pairs)&&0!==c.length){t.next=7;break}throw new Error("Could not fetch top pairs. Error from response: ".concat(a.error));case 7:return t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"_get100DaysHistoricalDailyData",value:function(){var t=Object(b.a)(j.a.mark((function t(n,a,r){var c,s,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.client.query({query:Object(_.gql)(G(),n,Math.floor(a.getTime()/1e3),Math.floor(r.getTime()/1e3))});case 2:if(c=t.sent,s=null===c||void 0===c?void 0:c.data,null!=(i=s.pairDayDatas)){t.next=6;break}throw new Error("Could not fetch daily data for pair ".concat(n,". Error from response: ").concat(c.error));case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"getHistoricalDailyData",value:function(){var t=Object(b.a)(j.a.mark((function t(n,a){var r,c,s,i,o,l=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:new Date,c=a,t.next=4,e._get100DaysHistoricalDailyData(n,a,r);case 4:s=t.sent,i=Math.floor(r.getTime()/1e3),o=864e5;case 7:if(!(s[s.length-1].date<=i&&Math.floor(c.getTime()/1e3)<=i)){t.next=19;break}return c=new Date(1e3*s[s.length-1].date+o),t.t0=[],t.t1=Object(A.a)(s),t.t2=A.a,t.next=14,e._get100DaysHistoricalDailyData(n,c,r);case 14:t.t3=t.sent,t.t4=(0,t.t2)(t.t3),s=t.t0.concat.call(t.t0,t.t1,t.t4),t.next=7;break;case 19:return t.abrupt("return",s);case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();K.FEE_RATIO=.003,K.client=new _.ApolloClient({uri:"https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2",cache:new _.InMemoryCache});var W=n(277);var z=function(){var e=Object(r.useState)(R.allPairs),t=Object(p.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(R.pairId),i=Object(p.a)(s,2),d=i[0],m=i[1],v=Object(r.useState)(R.pairData),x=Object(p.a)(v,2),y=x[0],D=x[1],w=Object(r.useState)(new Date(R.lpDate)),S=Object(p.a)(w,2),N=S[0],L=S[1],T=Object(r.useState)(R.lpShare),U=Object(p.a)(T,2),P=U[0],I=U[1],F=Object(r.useState)(R.historicalData),M=Object(p.a)(F,2),A=M[0],H=M[1],V=Object(r.useState)(R.lpStats),B=Object(p.a)(V,2),_=B[0],G=B[1],Y=Object(r.useState)(R.dailyDataAtLPDate),J=Object(p.a)(Y,2),z=J[0],Q=J[1],X=Object(r.useState)(!0),Z=Object(p.a)(X,2),$=Z[0],ee=Z[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getPairOverview(d);case 2:t=e.sent,D(t),N||L(new Date(1e3*t.createdAtTimestamp));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[d,N]),Object(r.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getTopPairs();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()})),Object(r.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,K.getHistoricalDailyData(d,N);case 4:t=e.sent,H(t),Q(t[0]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),ee(!0)}),[N,d]),Object(r.useEffect)((function(){if(y){var e=function(e,t,n){if(0===t.length)return{};var a=t[0],r=[new k.a(0)],c=[new k.a(0)],s=[new k.a(0)],i=[new k.a(0)],o=[Object(W.a)(new Date(1e3*a.date),"MMM d")],l=function(e,t){var a=new k.a(e.reserve0).div(new k.a(e.reserve1)),r=new k.a(t.reserve0).div(new k.a(t.reserve1)).div(a);return new k.a(2).times(r.sqrt()).div(r.plus(1)).minus(1).times(n)};t.forEach((function(e,a){if(0!==a){var u=new k.a(n).div(e.reserveUSD),d=new k.a(e.dailyVolumeUSD),j=d.times(u).times(K.FEE_RATIO),b=l(t[a-1],e),p=j.plus(b);r.push(r[r.length-1].plus(d)),c.push(c[c.length-1].plus(j)),s.push(s[s.length-1].plus(b)),i.push(i[i.length-1].plus(p)),o.push(Object(W.a)(new Date(1e3*e.date),"MMM d"))}}));var u=c[c.length-1],d=l(a,e),j=u.plus(d);return{totalFees:u,runningVolume:r,runningFees:c,runningImpermanentLoss:s,runningReturn:i,impermanentLoss:d,totalReturn:j,days:o}}(y,A,P);G(e)}}),[y,P,A]),Object(r.useEffect)((function(){$&&setTimeout((function(){return ee(!1)}),2e3)}),[$]),N?0===n.length?null:y?$?Object(a.jsx)(o.a,{className:"my-auto loading-container",children:Object(a.jsx)(f.a,{animation:"border"})}):Object(a.jsxs)(o.a,{children:[$&&Object(a.jsx)(o.a,{className:"my-auto loading-container",children:Object(a.jsx)(f.a,{animation:"border"})}),Object(a.jsxs)(l.a,{children:[Object(a.jsx)(u.a,{lg:3,children:Object(a.jsx)(h.a,{className:"top-row-card",children:Object(a.jsx)(g,{pairs:n,currentPairId:d,setPair:m})})}),Object(a.jsx)(u.a,{lg:3,children:Object(a.jsx)(h.a,{className:"top-row-card",children:Object(a.jsx)(O,{title:"USD Volume",value:y.volumeUSD})})}),Object(a.jsx)(u.a,{lg:3,children:Object(a.jsx)(h.a,{className:"top-row-card",children:Object(a.jsx)(O,{title:"Total Liquidity",value:y.reserveUSD})})}),Object(a.jsx)(u.a,{lg:3,children:Object(a.jsx)(h.a,{className:"top-row-card",children:Object(a.jsx)(O,{title:"Total Fees",value:y.feesUSD})})})]}),Object(a.jsxs)(l.a,{children:[Object(a.jsx)(u.a,{lg:9,children:Object(a.jsx)(h.a,{body:!0,children:Object(a.jsx)(q,{lpStats:_})})}),Object(a.jsx)(u.a,{lg:3,children:Object(a.jsxs)(o.a,{fluid:!0,children:[Object(a.jsx)(l.a,{children:Object(a.jsx)(h.a,{className:"lp-input-card",children:Object(a.jsx)(E,{pairData:y,lpDate:N,setLPDate:L,lpShare:P,setLPShare:I,dailyDataAtLPDate:z})})}),Object(a.jsx)(l.a,{children:Object(a.jsx)(h.a,{className:"lp-stats-card",children:Object(a.jsx)(C,{lpStats:_,pairData:y})})})]})})]})]}):null:null};var Q=function(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(o.a,{fluid:"lg",children:[Object(a.jsx)(l.a,{children:Object(a.jsx)(u.a,{children:Object(a.jsx)("h2",{className:"page-title",children:"Uniswap Impermanent Loss Calculator"})})}),Object(a.jsx)(l.a,{children:Object(a.jsx)(z,{})})]})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,558)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};n(545);i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(Q,{})}),document.getElementById("root")),X()},55:function(e){e.exports=JSON.parse('{"allPairs":[],"pairId":"0xa478c2975ab1ea89e8196811f51a7b7ade33eb11","pairData":{"reserve0":"56508026.061891155557676589","reserve1":"103167.254103154644269513","reserveUSD":"113360289.8654117803941111655154783","token0":{"derivedETH":"0.001825709749446200052420367379661102","id":"0x6b175474e89094c44da98b954eedeac495271d0f","name":"Dai Stablecoin","symbol":"DAI"},"token0Price":"547.7321903458827769864444434814755","token1":{"derivedETH":"1","id":"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","name":"Wrapped Ether","symbol":"WETH"},"token1Price":"0.001825709749446200052420367379661102","trackedReserveETH":"206334.508206309288539026","txCount":"591598","volumeUSD":"3211256571.979653197198825583508686"},"lpDate":"2020-05-18","lpShare":10000,"historicalData":[],"lpStats":{},"dailyDataAtLPDate":{}}')}},[[547,1,2]]]);
//# sourceMappingURL=main.52e77e45.chunk.js.map